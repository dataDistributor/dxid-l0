# Simple single-stage Dockerfile for testing
FROM rust:latest

# Set working directory
WORKDIR /app

# Copy the entire project
COPY . .

# Show Rust and Cargo versions
RUN rustc --version && cargo --version

# Build the release version
RUN cargo build --release --package dxid-node

# Create data directory
RUN mkdir -p /app/dxid-data

# Expose the port
EXPOSE 8545

# Set the entrypoint
ENTRYPOINT ["./target/release/dxid-node", "--no-discovery"]
